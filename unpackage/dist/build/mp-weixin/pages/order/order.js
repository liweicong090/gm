(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order"],{"118c":function(e,t,n){"use strict";(function(e){n("3e2c");i(n("66fd"));var t=i(n("8325"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},2867:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i}));var i={uIcon:function(){return n.e("node-modules/uview-ui/components/u-icon/u-icon").then(n.bind(null,"31db"))},uImage:function(){return n.e("node-modules/uview-ui/components/u-image/u-image").then(n.bind(null,"1e38"))},uPopup:function(){return n.e("node-modules/uview-ui/components/u-popup/u-popup").then(n.bind(null,"68cd"))},uNumberBox:function(){return n.e("node-modules/uview-ui/components/u-number-box/u-number-box").then(n.bind(null,"ab48"))}},o=function(){var e=this,t=e.$createElement;e._self._c},r=[]},4184:function(e,t,n){"use strict";var i=n("5188"),o=n.n(i);o.a},5188:function(e,t,n){},8325:function(e,t,n){"use strict";n.r(t);var i=n("2867"),o=n("dcaa");for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);n("4184");var u,c=n("f0c5"),a=Object(c["a"])(o["default"],i["b"],i["c"],!1,null,"e88ac756",null,!1,i["a"],u);t["default"]=a.exports},"9dfb":function(e,t,n){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=u(n("a34a")),r=n("2f62");function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,i,o,r,u){try{var c=e[r](u),a=c.value}catch(s){return void n(s)}c.done?t(a):Promise.resolve(a).then(i,o)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function u(e){c(r,i,o,u,a,"next",e)}function a(e){c(r,i,o,u,a,"throw",e)}u(void 0)}))}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f={data:function(){return{sp_index:0,total_price:0,add_price:0,bei_price:0,op_value:["","","","","",""],al_choose:[],sp_value:"",list:[{image:"/static/carousel/1.jpg"}],scrollTop:0,oldScrollTop:0,current:0,menuHeight:0,menuItemHeight:0,itemId:"",menuItemPos:[],arr:[],scrollRightTop:0,timer:null,goods:[],show:!1,show1:!1,goods_detail:{},value:1,shop_car:[]}},onReady:function(){this.getMenuItemTop()},methods:l(l({changeStore:function(){this.isLogin?(console.log("已登录"),e.navigateTo({url:"../location/location"})):(console.log("未登录"),this.wxlogin())},toBill:function(){this.SET_bill({shop_car:this.shop_car}),e.navigateTo({url:"../bill/bill"})}},(0,r.mapMutations)(["SET_bill"])),{},{clearCar:function(){this.shop_car=[],this.show1=!1},bc_decre:function(e,t){if(e.number<=1)return this.shop_car.splice(t,1),void(0===this.shop_car.length&&this.SET_show1(!1));var n=e.price/e.number;e.number--,e.price-=n},bc_incre:function(e){var t=e.price/e.number;e.number++,e.price+=t},showDetail:function(){this.show1=!this.show1},addToBag:function(){var t=this,n=[],i=0;if(this.goods_detail.cmenuShopProductAttrAOList.forEach((function(e){0===e.type&&n.push(e)})),n.forEach((function(e){e.cmenuShopProductAttrValueAOList.forEach((function(e){t.op_value.forEach((function(t){t===e.attrValue&&i++}))}))})),i<n.length)e.showToast({title:"请选择必选项",icon:"none"});else{var o={};o.price=this.total_price,o.value=this.op_value,o.detail=this.goods_detail,o.number=this.value,o.sp_value=this.sp_value,this.shop_car.push(o),this.show=!1}},swichMenu:function(e){var t=this;return a(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!=t.arr.length){n.next=3;break}return n.next=3,t.getMenuItemTop();case 3:if(e!=t.current){n.next=5;break}return n.abrupt("return");case 5:t.scrollRightTop=t.oldScrollTop,t.$nextTick((function(){this.scrollRightTop=this.arr[e],this.current=e,this.leftMenuStatus(e)}));case 7:case"end":return n.stop()}}),n)})))()},getElRect:function(t,n){var i=this;new Promise((function(o,r){var u=e.createSelectorQuery().in(i);u.select("."+t).fields({size:!0},(function(e){e?(i[n]=e.height,o()):setTimeout((function(){i.getElRect(t)}),10)})).exec()}))},observer:function(){var t=this;return a(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.tabbar.map((function(n,i){var o=e.createIntersectionObserver(t);o.relativeTo(".right-box",{top:0}).observe("#item"+i,(function(e){if(e.intersectionRatio>0){var n=e.id.substring(4);t.leftMenuStatus(n)}}))}));case 1:case"end":return n.stop()}}),n)})))()},leftMenuStatus:function(e){var t=this;return a(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.current=e,0!=t.menuHeight&&0!=t.menuItemHeight){n.next=6;break}return n.next=4,t.getElRect("menu-scroll-view","menuHeight");case 4:return n.next=6,t.getElRect("u-tab-item","menuItemHeight");case 6:t.scrollTop=e*t.menuItemHeight+t.menuItemHeight/2-t.menuHeight/2;case 7:case"end":return n.stop()}}),n)})))()},getMenuItemTop:function(){var t=this;new Promise((function(n){var i=e.createSelectorQuery();i.selectAll(".class-item").boundingClientRect((function(e){e.length?e.forEach((function(i){t.arr.push(i.top-e[0].top),n()})):setTimeout((function(){t.getMenuItemTop()}),10)})).exec()}))},rightScroll:function(e){var t=this;return a(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.oldScrollTop=e.detail.scrollTop,0!=t.arr.length){n.next=4;break}return n.next=4,t.getMenuItemTop();case 4:if(!t.timer){n.next=6;break}return n.abrupt("return");case 6:if(t.menuHeight){n.next=9;break}return n.next=9,t.getElRect("menu-scroll-view","menuHeight");case 9:setTimeout((function(){t.timer=null;for(var n=e.detail.scrollTop+t.menuHeight/2,i=0;i<t.arr.length;i++){var o=t.arr[i],r=t.arr[i+1];if(!r||n>=o&&n<r)return void t.leftMenuStatus(i)}}),10);case 10:case"end":return n.stop()}}),n)})))()},choose:function(e){var t=this;this.sp_index=0,this.value=1,this.add_price=0,this.op_value=["","","","","",""],i.callFunction({name:"gm_getGoodsDetail",data:{id:e},success:function(e){console.log(e.result.data[0]),3!==e.result.data[0].sellState&&(t.show=!0,t.goods_detail=e.result.data[0],t.sp_value=t.goods_detail.cmenuShopProductSkuAOList[0].skuName,t.total_price=t.goods_detail.cmenuShopProductSkuAOList[0].sellPrice,t.bei_price=t.goods_detail.cmenuShopProductSkuAOList[0].sellPrice)}})},valChange:function(e){console.log("当前值为: "+e.value),this.total_price=(this.bei_price+this.add_price)*this.value},changeSp:function(e,t){this.sp_index=t,this.sp_value=e.skuName,this.bei_price=e.sellPrice,this.total_price=(this.bei_price+this.add_price)*this.value},changeOp:function(e,t,n,i){this.op_value[t]===n.attrValue?(this.op_value.splice(t,1,""),1===e.type&&(console.log(n.price),this.add_price=0,this.total_price=(this.bei_price+this.add_price)*this.value)):(this.op_value.splice(t,1,n.attrValue),1===e.type&&(console.log(n.price),this.add_price=n.price,this.total_price=(this.bei_price+this.add_price)*this.value))}}),onTabItemTap:function(){this.isLogin||this.wxlogin()},onShow:function(){var t=this;this.isLogin&&(console.log("已登录"),this.address.distance?(console.log("有地址"),i.callFunction({name:"gm_getGoods",success:function(e){console.log(e.result[0].data),t.goods=e.result[0].data}})):e.showModal({title:"选择门店",content:"请选择要下单的门店地址",success:function(t){t.confirm&&(console.log("确认"),e.navigateTo({url:"../location/location"}))}}))},computed:l(l({},(0,r.mapState)(["address","isLogin"])),{},{mainprice:function(){var e=0;return this.shop_car.forEach((function(t){e+=t.price})),e}})};t.default=f}).call(this,n("543d")["default"],n("a9ff")["default"])},dcaa:function(e,t,n){"use strict";n.r(t);var i=n("9dfb"),o=n.n(i);for(var r in i)"default"!==r&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=o.a}},[["118c","common/runtime","common/vendor"]]]);