(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/location/location"],{"3a9a":function(t,e,n){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n("2f62");function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u={data:function(){return{location:{},markers:[{id:1,latitude:"",longitude:"",iconPath:"https://hellouniapp.dcloud.net.cn/static/location.png",width:"40",height:"40"}],shop:[]}},computed:c({},(0,r.mapState)(["address"])),methods:c(c({distance:function(t,e,n,o){var r=t*Math.PI/180,a=n*Math.PI/180,c=r-a,i=e*Math.PI/180-o*Math.PI/180,u=2*Math.asin(Math.sqrt(Math.pow(Math.sin(c/2),2)+Math.cos(r)*Math.cos(a)*Math.pow(Math.sin(i/2),2)));return u*=6378.137,u=Math.round(1e4*u)/1e4,u*=1e3,parseInt(u)},toMeun:function(e,n,o){var r=this;t.showModal({title:"确认门店",content:"当前门店为: ".concat(e," "),confirmText:"确认下单",success:function(a){a.confirm&&(console.log("确认"),r.SET_address({shop_name:e,distance:n,address:o}),t.switchTab({url:"../order/order"}))}})}},(0,r.mapMutations)(["SET_address"])),{},{reflesh:function(){t.redirectTo({url:"../location/location"})}}),onLoad:function(){var e=this;t.getLocation({type:"gcj02",success:function(t){console.log(t),e.location=t,e.markers[0].latitude=t.latitude,e.markers[0].longitude=t.longitude,o.callFunction({name:"gm_getShopAddress",success:function(t){t.result.map((function(t){var n=e.distance(e.markers[0].latitude,e.markers[0].longitude,t.latitude,t.longitude);t.dis=n,e.markers.push({id:e.markers.length+1,latitude:t.latitude,longitude:t.longitude,iconPath:"/static/locate.png",width:"25",height:"35"})})),t.result.sort((function(t,e){return t.dis-e.dis})),e.shop=t.result}})},fail:function(){console.log("失败"),e.shop=[],t.showModal({title:"获取位置失败",content:"请打开设备定位权限",showCancel:!1,complete:function(){}})}})}};e.default=u}).call(this,n("543d")["default"],n("a9ff")["default"])},"84a0":function(t,e,n){},"97b9":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}));var o={uIcon:function(){return n.e("node-modules/uview-ui/components/u-icon/u-icon").then(n.bind(null,"31db"))}},r=function(){var t=this,e=t.$createElement;t._self._c},a=[]},c1f4:function(t,e,n){"use strict";n.r(e);var o=n("97b9"),r=n("d7a3");for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);n("d112");var c,i=n("f0c5"),u=Object(i["a"])(r["default"],o["b"],o["c"],!1,null,"1281a5b8",null,!1,o["a"],c);e["default"]=u.exports},c979:function(t,e,n){"use strict";(function(t){n("3e2c");o(n("66fd"));var e=o(n("c1f4"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},d112:function(t,e,n){"use strict";var o=n("84a0"),r=n.n(o);r.a},d7a3:function(t,e,n){"use strict";n.r(e);var o=n("3a9a"),r=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=r.a}},[["c979","common/runtime","common/vendor"]]]);